#  MewTrain火车购票系统需求规格说明书

[TOC]

## **一、引言**

### **1.1 目的**

本文档是MewTrain火车购票系统的需求规格说明书，旨在对该软件系统的功能、性能、约束条件和接口等方面进行详细的描述和规范。

本文档适用于软件开发团队、项目管理人员、软件测试人员和其他相关利益相关者，旨在确保MewTrain火车购票系统的需求得到准确、清晰和一致的定义和表达，从而为系统开发和实施提供指导和依据。

### **1.2 范围**

该火车购票系统被命名为MewTrain。该系统将提供火车票查询、火车票购买、用户管理、铁路管理功能。由于MewTrain火车购票系统为课程作业，故该系统的开发不以盈利为目的，不会进行长期部署和正式的运营。

### **1.3 定义、缩写和简略语**

| 缩写     | 全称                                | 含义                                       |
| -------- | ----------------------------------- | ------------------------------------------ |
| SRS      | Software Requirements Specification | 软件需求规格说明书                         |
| UI       | User Interface                      | 用户界面                                   |
| API      | Application Programming Interface   | 应用程序编程接口                           |
| GUI      | Graphical User Interface            | 图形用户界面                               |
| SQL      | Structured Query Language           | 结构化查询语言                             |
| HTTPS    | Hypertext Transfer Protocol Secure  | 超文本传输安全协议                         |
| MySQL    | MySQL Server                        | 一种开源关系型数据库管理系统               |
| Python   |                                     | 一种高级编程语言                           |
| URL      | Uniform Resource Locator            | 统一资源定位符，用于标识互联网上资源的位置 |
| SMS      | Short Message Service               | 短信服务，一种手机短信通讯服务             |
| Windows  |                                     | 微软公司开发的一种操作系统                 |
| Linux    |                                     | 一种自由和开放源代码的类Unix操作系统       |
| Web      | World Wide Web                      | 万维网，一种基于超文本和HTTP协议的信息系统 |
| MewTrain |                                     | 该火车购票系统的名称                       |

### **1.4 引用文件**

[1] GB/T 9385-2008 计算机软件需求规格说明规范

[2] Q/CR 9140 -2018 铁路客运服务信息系统设计规范

[3] 中华人民共和国电子商务法，全国人民代表大会常务委员会公告 [2018]

[4] 吕云翔. 软件工程实用教程[M]. 北京：清华大学出版社, 2015.

### **1.5综述**

本文档包括以下章节：引言、总体描述、结构化自然语言需求、模型化需求共四章。

第一章引言，介绍了MewTrain火车购票系统需求规格说明书的目的，该系统的范围，该文档使用的定义、简写和缩略语，引用文件，对整篇文档进行了综述。

第二章总体描述，对MewTrain火车购票系统进行了产品描述，介绍了产品功能，用户特点和产品部署和运营时的约束，并对该系统地假设和依赖关系进行了分析。

第三章结构化自然语言需求，从用户故事、交互流程、非功能需求三个方面对产品的需求进行了自然语言的描述。

第四章模型化需求，通过用例图、系统顺序图、概念类图、操作合约及不变式模型化的方式，对该系统的需求进行了更规范和标准的描述。

## **二、总体描述**

### **2.1 产品描述**

MewTrain火车购票系统是一个完全自我包含的软件系统，旨在为用户提供火车票查询、火车票购买、用户管理和铁路管理功能。该系统将通过直观地用户界面和稳定的系统接口，为用户提供便捷和高效的服务体验。

MewTrain火车购票系统将作为一个独立的软件产品，不与其他系统集成。但作为一个处理现实实际情况的系统，该系统需要从铁路部门处获得实际的车次和票价信息，来为用户提供服务。

####  **2.1.1 系统接口**

用户接口：该接口负责管理用户注册、登录和注销，以及处理用户与系统的交互。它应该提供一个易于使用的界面，使用户可以方便地浏览和搜索车票，选择和购买车票，以及查看订单历史记录等。

支付接口：该接口负责处理用户的支付请求，并与第三方支付平台进行交互。它应该确保所有支付信息都是安全和私密的，并支持常见的支付方式，例如信用卡、银行转账和电子钱包。

车票查询接口：该接口应该提供一个能够搜索和显示可用车票信息的方法。它应该支持按照日期、时间、出发地点和目的地点等条件进行筛选，并显示车票价格、余票数量和列车时刻表等详细信息。

订单管理接口：该接口应该提供管理用户订单的方法，包括创建、修改和取消订单等。它还应该提供订单状态的实时更新和通知功能，以便用户能够及时了解订单的状态和相关信息。

火车信息管理接口 该接口将允许系统管理员添加、编辑和删除火车信息。管理员可以添加新的火车线路，编辑已有的线路信息（例如列车类型、出发时间、到达时间、票价等），并删除已经废弃的线路。此外，该接口还将提供火车线路的搜索和筛选功能，以方便管理员快速找到需要编辑的线路。

用户管理接口 该接口将允许系统管理员管理用户账户，包括添加、编辑和删除用户账户。管理员可以添加新用户账户，重置用户密码，禁用或删除已有的账户等。此外，该接口还将提供用户账户的搜索和筛选功能，以方便管理员快速找到需要编辑或删除的账户

系统配置接口：该接口负责管理系统的配置和设置，包括系统的数据库连接、服务器配置、邮件通知设置等。它应该提供一个易于使用的界面，使管理员可以轻松地进行配置和管理。

#### **2.1.3 软件接口**

1. 名称：MySQL数据库 

记：DB 

规格说明编号：MewTrain-SRS-001 

版本号：MySQL 8.0.23 

来源：Oracle Corporation

目的：用于存储和管理MewTrain购票系统的所有数据。



2. 名称：支付宝支付接口 

记：Alipay 

规格说明编号：MewTrain-SRS-003

版本号：1.0 

来源：阿里巴巴集团

目的：允许用户使用支付宝进行购票支付。



3. 名称：微信支付接口 

记：WeChat Pay 

规格说明编号：MewTrain-SRS-004 

版本号：1.0 

来源：腾讯公司

目的：允许用户使用微信进行购票支付。



4. 名称：短信发送接口 

记：SMS 

规格说明编号：MewTrain-SRS-005 

版本号：1.0 

来源：阿里云通信

目的：向用户发送订单确认信息和车票取票码。

#### **2.1.4 操作**

1. 用户操作模式：用户可以使用系统的不同操作模式，例如选择座位模式、购票模式、退票模式等等。

2. 交互操作的周期和无人值守操作的周期：系统应该明确用户和系统之间交互操作的周期和无人值守操作的周期，确保系统能够在需要时及时响应用户的操作。

3. 数据处理支持功能：系统应该支持数据处理功能，例如对订单数据、座位信息等数据进行处理和管理。

4.  备份和恢复操作：系统应该具备备份和恢复功能，确保在系统出现故障或者数据丢失时能够及时恢复数据。

#### **2.1.5 现场适应性要求**

在部署该系统时，操作系统需要为Windows或Linux，内存至少为2GB，运行环境需要Python 3.9及以上。该系统作为一个Web开发项目，部署在服务器上，可以通过浏览器向互联网中各种设备提供服务，具有良好的现场适应性。

### **2.3用户特点**

#### **2.3.1 目标用户群体**

火车购票系统的目标用户群体为所有需要搭乘火车旅行的人，包括旅游者、商务出行者、探亲访友者等。系统的使用者主要分为两类：一是购票用户，需要使用系统进行火车票购买、支付、退改签等相关业务；二是管理用户，包括系统管理员、站务员等，需要使用系统进行票务管理、数据监控等操作。

#### **2.3.2 用户属性**

1. 用户基本素质：购票用户和管理用户都需要具备基本的计算机应用知识和网络使用技能。

2. 用户特征：购票用户属于广大消费者群体，具有购买火车票的需求；管理用户则具有相关的管理经验和技能，需要对票务系统进行有效的管理和维护。

3. 用户习惯：由于系统的操作流程相对稳定，用户在使用系统时一般会按照规定的步骤进行操作。购票用户可能存在较为急迫的购票需求，需要快速、便捷地完成购票流程。

#### **2.3.3用户需求**

1. 用户需要一款稳定、安全、可靠的火车购票系统，以便于快速便捷地完成购票流程。

2. 用户需要多种支付方式，并且支付过程需要安全可靠。

3. 用户需要系统提供车票预订、购票、退票、改签等功能，并且这些功能需要易于理解和操作。

4. 用户需要查询车次时刻、座位信息、票价等相关信息，以便于做出正确的购票决策。

5. 用户需要通过系统获取相关的信息提示和提醒，以确保购票流程的顺利完成。

### **2.4约束**

#### **2.4.1 法规政策**

本系统需要遵守国家和地方政府的法规政策，符合中国相关的数据保护法规和隐私保护要求，如《中华人民共和国网络安全法》、《中华人民共和国个人信息保护法》等。同时，本系统所处理的数据应当遵守中国境内的相关法律法规，如《中华人民共和国刑法》、《中华人民共和国民法典》等。

#### **2.4.2 硬件局限**

本系统受服务器带宽限制，对于高并发请求存在处理能力上限。

#### **2.4.3 与其他应用的接口**

本系统需要与Mysql数据库系统进行数据交换和信息共享，需要遵守接口规范和标准。

#### **2.4.4 并行操作**

本系统需要支持多用户同时操作，需要考虑并发控制和数据一致性问题。

#### **2.4.5 审核和控制功能**

本系统需要具备审计和监控功能，能够对用户和系统进行安全控制和管理，例如防止SQL注入和跨站脚本攻击。

#### **2.4.6 接口协议**

前后端交互需要使用RESTful API接口协议。

#### **2.4.7 可靠性需求** 

本系统需要保证高可靠性和可用性，避免系统崩溃或数据丢失等问题。

#### **2.4.8 应用的关键性**

本系统是对客户购票和运营管理的重要支持，需要考虑其关键性和紧急性，确保系统稳定运行。

#### **2.4.9 安全和保密考虑**

本系统需要具备安全和保密保护措施，保障用户和系统数据的机密性、完整性和可用性，例如数据加密和访问控制。

### **2.5 假设和依赖关系**

1.  系统运行的硬件平台包括服务器和客户端设备，且客户端设备必须具有Web浏览器软件。

2. 网络通信基础设施已经建立，且具有足够的带宽和可靠性，以保证系统的正常运行和数据传输的稳定性。

3. 系统的用户能够提供有效的身份验证信息，包括用户名和密码等。

4. 系统需要依赖第三方支付平台提供支付服务，需要确保支付平台的安全性和稳定性，以保证系统正常运行。

5. 系统需要遵守中国相关的法律法规，例如《中华人民共和国网络安全法》、《中华人民共和国电子商务法》等，以确保系统合规性和合法性。

6. 系统需要与第三方铁路信息系统进行集成，以获取实时的列车运行信息和票务信息，需要确保铁路信息系统的稳定性和数据传输的安全性。

7.  系统需要支持多种语言和货币，需要确保系统具有良好的国际化和本地化能力。

## **二 结构化自然语言需求**

### **2.1：用户故事**

**作为用户，我应该可以通过日期与城市来查询我应该做的火车班次与其余票情况，并能够通过线上支付来抢购车票**

作为用户，我应该可以选择特定的日期与始终城市，以便查询是否有相应的列车与其起止时间

作为用户，我应该可以选择某一条列车的班次，以便查询该列车的详细信息（列车班号、始发站、中间站、终点站、时刻表、车厢设施等）

作为用户，我应该可以查看列车的余票，以便选择是否购票或抢票

作为用户，我应该可以选择被提供的支付方式来进行支付车票

作为用户，我可以在自己的订单列表中查看所有的已完成和未完成的订单，可以删除过期的订单或未支付的订单

作为用户，我可以在订单中心取消距离发车时间一个小时的订单，并接收退款。

作为用户，我可以选择改签，改签的起始点需一致，然后计算差价退还或支付额外的价钱，改签的新时间不能超过原始的24小时。

**作为铁路管理员，我应该可以管理列车信息（包括该车次的火车信息、起始火车站台以及沿途的火车站台信息、火车不同的座位信息、发车日期时间以及到各个站台的时间）**

作为铁路管理员，我应该可以选择添加一趟班次

作为铁路管理员，我应该可以选择特定日期与始终站，以便查询对应的车次

作为铁路管理员，我应该可以对任何车次信息进行修改

作为铁路管理员，我应该可以查看所有用户信息与其订单

作为系统管理员，我可以管理所有用户信息以及用户账户信息。

作为系统管理员，我可以通过用户的姓名、身份证号、ID进行查询，以便得到该用户所有基本信息与账户信息、订单信息等

作为系统管理员，我可以对某名用户的详细信息进行修改

作为系统管理员，我可以批量添加、删除用户信息

### **2.2：交互流程**

**作为用户，我应该可以通过日期与城市来查询我应该做的火车班次与其余票情况，并能够通过线上支付来抢购车票**

基本流程{

（用户）1.用户点击“日期”。

​	（用户）2.用户选择特定日期。

​	（用户）3.用户点击“起始地”与“终点地”。

​	（用户）4.用户输入起止地点。

​	（系统）5.当用户选择完日期与起止地点后，MewTrain应在数据库中筛选该日期经过起止地点的车次，并显示该车次时间。

​	（用户）6.用户选择某一车次。

​	（系统）7.当用户点击某车次后，MewTrain应显示该车次列车班号、始发站、中间站、终点站、时刻表、车厢设施等信息以及该车次的不同座位的余票。

​	（用户）8.用户进行购买该车次的车票。

​	（可选8a、8b）

​	（用户）9.用户选择乘车人信息

​	（系统）10.当用户点击购买后，MewTrain计算票价，并提供不同支付方式，将该订单加入到用户的订单中。

​	（用户）11.用户选择购票支付方式。

​	（可选10a、10b）

​	（用户）12.用户购票结束。

​	（系统）13.当用户支付结束后，MewTrain向用户显示电子订单与电子车票，更新用户订单信息、车次余票信息。

}

扩展流程{

（可选）*a.消息通知：在用户购票、改签以及取消订单后，系统会自动发消息通知用户：

​	（系统）1.系统向用户发送消息提示操作成功或失败

（可选）*b.用户也可在自己的订单页面中选择为进行支付的订单进行付款

​	（用户）1.用户点击“个人订单”

​	（系统）2.显示用户所有订单，包括已支付、未支付、已取消、已改签

​	（用户）3.用户点击“未支付订单”，选择支付

​	（系统）4.MewTrain响应该支付行为

​	（可选）4a.用户可以通过选择城市首字母来选择城市：

​		（用户）1.用户选择城市首字母

（系统）2.MewTrain在数据库中筛选该首字母对应的城市并显示

​	（选择）8a.有余票时，用户选择预定购票：

（系统）1.MewTrain显示“购票”按钮，用户可直接购票

​	（选择）8b.无余票时，用户选择抢票：

（系统）1.MewTrain显示“抢票”按钮，用户选择抢票候补

​	（异常处理）8c.用户进入选票页面后点击“购票”前车票已空：

​		（系统）1.MewTrain弹窗提示，阻止购票行为发生，询问用户是否改为抢票

​	（可选）9a.用户可以选择添加乘车人信息

​		（用户）1.用户点击乘车人信息界面

​		（系统）2.当用户点击添加乘车人后，跳转信息填写页面

​		（用户）3.用户填写信息、提交

​		（系统）4.当用户提交后，MewTrain对信息进行审核，并储存

​	（异常处理）9b.用户选择的乘车人数与当前该车次人数相加超过该列车最大人数：

​		（系统）1.MewTrain发出弹窗提示，禁止购票动作发生。

​	（选择）10a.用户选择支付宝支付

​		（系统）1.跳转到支付宝收款码页面。

​	（选择）10b.用户选择微信支付

​		（系统）1.跳转到微信收款码页面。

}



**作为用户，我可以在自己的订单列表中查看所有的已完成和未完成的订单，可以删除过期的订单或未支付的订单**

基本流程{

​	（用户）1.用户点击“个人订单”

​	（系统）2.MewTrain查询数据库中该用户订单并显示

​	（用户）3.用户点击某一订单，来查看该订单详细信息

​	（系统）4.展示该订单详细信息

​	（用户）5.用户点击删除订单

​	（系统）6.系统弹窗询问是否删除

​	（用户）7.用户选择“确定”

​	（系统）8.进行响应，更新数据库，更新订单信息

}

扩展流程{

​	（可选）7a.用户选择“取消”

​		（系统）1.取消弹窗

}

**作为用户，我可以在订单中心取消距离发车时间一个小时的订单，并接收退款**

基本流程{

​	（用户）1.用户点击“个人订单”

​	（系统）2.MewTrain跳转到用户订单页面

​	（用户）3.用户选择要取消的订单，点击“取消订单”

​	（系统）4.弹窗询问用户是否取消订单

​	（用户）5.用户选择“确定”

​	（系统）6.NewTrain更新用户个人订单信息与当前订单状态，更新列车余座信息，并且将钱款按照原支付方式退还给用户

}

扩展流程{

（可选）5a.用户选择“取消”

​	（系统）1.关闭弹窗

}

**作为用户，我可以选择改签，改签的起始点需一致，然后计算差价退还或支付额外的价钱，改签的新时间不能超过原始的24小时**

基本流程{

​	（用户）1.用户点击个人订单

​	（系统）2.跳转到用户订单页面

​	（用户）3.用户选择一个已生效订单并点击“改签”

​	（系统）4.显示弹窗询问用户是否选择改签

​	（用户）5.用户选择“确定”

​	（系统）6.MewTrain查询与该车次始终点相同的车次，按时间顺序排列展示

​	（用户）7.用户选择想要改签的车次

​	（系统）8.调用“购票或抢票”接口

​	（系统）9.计算原票与改签票差价

​	（用户）10.进行付款或接受退款

​	（系统）11.更新用于订单信息，更新原车次与当前车次余票情况

}

扩展流程{

​	（可选）7a.用户选择的改签车次时间与原车次时间相差超过24小时

​		（系统）1.弹窗提示，并阻止接下来的改签操作

}

**作为铁路管理员，我应该可以管理列车信息、用户信息、车票价格**

基本流程{

​	（用户）1.铁路管理员进行列车条件选择

​	（可选1a、1b、1c）

​	（系统）2.MewTrain显示特定的所有车次

​	（用户）3.铁路管理员选择车次

​	（系统）4.MewTrain显示该车次信息

​	（用户）5.铁路管理员对该列车信息进行修改

​	（系统）6.MewTrain对数据库进行修改

}

扩展流程{

​	（可选）*a.铁路管理员可随时在首页添加车次

​		（用户）1.铁路管理员点击添加车次

​		（系统）2.MewTrain跳转到车次信息添加页面

​		（用户）3.铁路管理员填写车次信息，提交

​		（系统）4.MewTrain将数据存入到数据库中

​	（选择）1a.铁路管理员只选择日期

​		（系统）1.MewTrain查询该日期所有列车并按照发车时间顺序显示

（选择）1b.铁路管理员只选择始发地

​		（系统）1.MewTrain查询途径始发地所有列车并按照发车时间顺序显示

（选择）1c.铁路管理员选择日期与始发地

​		（系统）1.MewTrain查询途径始发地与该日期的所有列车并按照发车时间顺序显示

}

### **2.3：非功能需求(可测试)**

非功能需求：

{

1. 支持文本显示的语言国际化。

2. 系统需要易于使用，用户可以轻松地进行查询、订票等操作。易用性可以通过用户体验测试、用户调查等方式进行测试。

3. 系统应该易于维护和升级，以确保其长期可靠性和可用性。例如，系统应该能够进行日志记录和错误报告，以便开发人员可以快速定位和修复问题。

4. 可靠性要求，对输入有提示，数据有检查，防止数据异常。

5. 安全性要求，严格权限访问控制，不同的用户具有不同的身份和权限，需要在用户身份真实可信的前提下，保护数据不被非法/越权访问和篡改，要确保数据的机密性和完整性。

6. 响应时间要求：在95％的情况下，一般时段响应时间不超过1.5秒，高峰时段不超过4秒。在非高峰时间根据起始地点和日期等特定条件进行搜索，可以在2秒内得到搜索结果。

7. 并发处理：系统可能会面临大量的并发访问请求，特别是在高峰期，例如节假日和周末等。因此，系统需要具备高并发处理能力，以确保多个用户同时访问系统时，系统仍然能够良好地工作。

8. 前端页面需要简洁美观，功能操作简单易懂

}

## **三 、模型化需求**

### **3.1:用例图**

![img](https://docimg2.docs.qq.com/image/AgAAET6QeFnU4P2AADdCEpftJ6LxTIpn.jpeg?w=1382&h=745)

### **3.2:系统顺序图**

![img](https://docimg7.docs.qq.com/image/AgAAET6QeFk_wbBPDd9LaLbb1idAmfOS.jpeg?w=1103&h=753)





![img](https://docimg3.docs.qq.com/image/AgAAET6QeFnfln0oJlBEwIpPY-AqpnSm.jpeg?w=1105&h=753)



![img](https://docimg5.docs.qq.com/image/AgAAET6QeFlwBRTa3k5I9K46c6uONgGP.jpeg?w=1333&h=753)





### **3.3：概念类图**

![img](https://docimg6.docs.qq.com/image/AgAAET6QeFkq87YOBXJCoa9gwWe9KGgr.jpeg?w=1105&h=696)

## **3.4：操作合约及不变式**

#### **3.4.1 操作合约**

1. 用户注册：用户在注册时必须提供有效的个人信息，并且系统会对这些信息进行验证。如果注册成功，则会在系统中创建一个新的用户账户。
2. 用户账户设置：用户可以在系统中开通多个账户，并且可以通过充值功能来完成后续购票功能。
3. 管理员设置：系统管理员可以管理所有用户信息以及用户账户信息。
4. 铁路系统员：铁路系统员可以在系统中添加、修改和删除火车铁路运行车次。一条完整运行车次的信息应该包括该车次的火车信息、起始火车站台以及沿途的火车站台信息、火车不同的座位信息、发车日期时间以及到各个站台的时间。
5. 用户查询火车车次：用户可以在系统中查询火车车次，并且系统会返回所有能满足用户需求的车次信息，包括起始点满足，以及沿途的火车站台也能满足。
6. 用户购票：用户可以在系统中购买火车车票，包括选择座位、车厢等信息，同时需要支付对应的票价。
7. 用户退票：用户可以在系统中退掉已经购买的火车车票，同时需要支付对应的手续费。

#### **3.4.2 不变式**

1. 用户必须提供有效的个人信息才能注册成功，并且系统需要对这些信息进行验证。
2. 用户账户中的余额必须大于等于购票所需的票价，才能进行购票操作。
3. 系统管理员必须对所有用户信息和用户账户信息进行管理，并保证这些信息的准确性和安全性。
4. 铁路系统员必须确保添加、修改和删除火车铁路运行车次的操作是合法的，并且不会破坏系统中已有的其他信息。
5. 用户查询火车车次时，系统必须返回所有能满足用户需求的车次信息，包括起始点满足，以及沿途的火车站台也能满足。
6. 用户购票时，系统必须保证用户选择的座位和车厢信息是有效的，并且用户账户中的余额必须大于等于购票所需的票价。
7. 用户退票时，系统必须保证用户已经购买的车票信息是有效的，并且需要支付对应的手续费。